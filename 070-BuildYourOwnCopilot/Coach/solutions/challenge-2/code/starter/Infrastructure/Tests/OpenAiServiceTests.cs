using BuildYourOwnCopilot.Infrastructure.Interfaces;
using Moq;
using NUnit.Framework;

namespace BuildYourOwnCopilot.Infrastructure.Tests
{
    [TestFixture]
    public class OpenAiServiceTests
    {
        private Mock<IOpenAiService> _openAiServiceMock;

        [SetUp]
        public void Setup()
        {
            _openAiServiceMock = new Mock<IOpenAiService>();
        }

        [Test]
        public async Task GetEmbeddingsAsync_WithInputAndSessionId_ShouldReturnEmbeddingsAndTokens()
        {
            // Arrange
            var expectedTokens = 1530;
            var vectors = new[] {
                0.005778491,
                -0.016172875,
                -0.0031324597,
                -0.016228072,
                -0.029944658,
                0.004308857,
                -0.012108957,
                0.0063960133,
                -0.025404662,
                -0.024976881,
                0.027819553,
                0.0005735368,
                -0.009618169,
                -0.0027943747,
                0.0045710453,
                -0.0005243765,
                0.012522939,
                -0.023624541,
                0.005150619,
                -0.025584053,
                -0.006447761,
                0.019277737,
                -0.006313217,
                -0.007872547,
                -0.007893247,
                -0.020919863,
                0.020768069,
                -0.0025804844,
                -0.009418078,
                -0.019153541,
                0.0178564,
                0.007027335,
                -0.011501784,
                -0.020768069,
                -0.017359622,
                0.006713399,
                0.015662298,
                0.005488704,
                0.011267195,
                -0.02252059,
                0.008672912,
                0.0290339,
                0.01272303,
                -0.021678828,
                -0.0039086747,
                0.0022423996,
                -0.011067104,
                -0.0071687787,
                -0.00803814,
                0.009017896,
                0.0000970808,
                0.017497616,
                -0.0138683785,
                -0.021347644,
                -0.0048780814,
                0.009355981,
                0.035850793,
                0.021333843,
                0.021982415,
                -0.011736374,
                0.0058336887,
                0.009045495,
                -0.03593359,
                0.0022803477,
                -0.014020172,
                -0.0054749046,
                0.0010108047,
                -0.005450756,
                -0.012660933,
                -0.017994393,
                -0.0015472557,
                0.006634053,
                -0.018228984,
                -0.011432787,
                0.007893247,
                -0.0048780814,
                -0.0040742676,
                0.004329556,
                0.012902422,
                -0.008072638,
                0.01538631,
                -0.014434153,
                0.0001642989,
                0.0155243045,
                0.019125942,
                0.039852615,
                0.005730193,
                0.0113016935,
                -0.02566685,
                0.018408375,
                0.014779137,
                0.0024183416,
                0.00017960758,
                0.009611269,
                -0.0049953763,
                0.004402003,
                -0.0357128,
                0.023748735,
                0.01049443,
                -0.04106696,
                0.013668288,
                0.0014670468,
                -0.006064828,
                -0.014296159,
                -0.02075427,
                -0.0055818497,
                -0.0006688388,
                0.0015774418,
                0.0013100788,
                -0.0045227474,
                -0.009045495,
                0.039328236,
                0.035547208,
                -0.0040811673,
                0.015938286,
                -0.0052161664,
                0.017249227,
                -0.005557701,
                -0.023417551,
                -0.029171893,
                0.02815074,
                0.01181917,
                0.02786095,
                -0.014047771,
                -0.003325651,
                0.002054383,
                -0.01653166,
                -0.013895977,
                -0.02519767,
                0.01271613,
                0.033118516,
                0.017663209,
                -0.0035498908,
                0.014475551,
                -0.02431451,
                0.03077262,
                -0.016435064,
                0.024825087,
                -0.034277663,
                -0.0122814495,
                -0.008341726,
                0.03102101,
                0.012150356,
                0.00041915622,
                0.006223521,
                0.017718406,
                0.01315771,
                -0.009694066,
                -0.012433243,
                -0.035547208,
                0.035850793,
                -0.00023264895,
                0.020409286,
                0.012930021,
                0.006979037,
                -0.029558275,
                0.0008559929,
                0.025349464,
                -0.021444239,
                -0.017704606,
                -0.011460386,
                -0.0051609688,
                0.011770872,
                -0.015965885,
                -0.011398289,
                0.03527122,
                0.05218926,
                -0.024093721,
                -0.0026460313,
                -0.011688076,
                -0.004633142,
                0.010618624,
                -0.0046779905,
                0.015289715,
                0.008900601,
                0.021596031,
                0.0050540236,
                -0.030220646,
                0.003147984,
                -0.007976042,
                0.00713428,
                0.02031269,
                0.020464484,
                0.017511414,
                -0.0074447664,
                -0.012067559,
                0.00056016864,
                -0.027253779,
                0.0013687261,
                -0.01716643,
                0.00083141273,
                0.012798927,
                -0.030110251,
                -0.0200781,
                -0.6451487,
                -0.033891283,
                0.0017275101,
                -0.02631542,
                0.027184783,
                0.009238686,
                0.01675245,
                0.014682542,
                -0.020878464,
                0.010777317,
                0.0045710453,
                0.026053233,
                -0.0076586567,
                -0.012012362,
                0.00782425,
                -0.020022903,
                0.01876716,
                0.004867732,
                0.013813181,
                0.013054215,
                -0.019581322,
                0.0021699527,
                0.025390862,
                0.014144366,
                0.027488368,
                0.016090078,
                -0.0009331832,
                0.005378309,
                0.016559258,
                0.01182607,
                -0.033587694,
                0.014420354,
                0.00624077,
                0.00267708,
                0.046283126,
                -0.032759733,
                -0.0093421815,
                0.017263027,
                0.0014204738,
                0.043026473,
                -0.015193119,
                -0.0059854817,
                0.0056853453,
                -0.013675187,
                -0.0029323685,
                0.010446132,
                0.007838049,
                -0.0011444862,
                -0.0043847533,
                0.0020129848,
                -0.013550993,
                0.018780958,
                -0.026149828,
                0.002942718,
                0.036733955,
                0.00356714,
                0.029806664,
                0.014654943,
                0.013723485,
                0.019981505,
                0.007382669,
                0.005664646,
                -0.019719316,
                -0.022465393,
                0.0086660115,
                0.023044968,
                -0.024452504,
                -0.018877555,
                0.019305335,
                -0.003080712,
                -0.0025511608,
                0.012578136,
                -0.011632878,
                0.038031094,
                -0.007769052,
                0.019802112,
                -0.00085987395,
                0.0069755875,
                -0.021982415,
                -0.0071756784,
                -0.0024148917,
                0.0011099877,
                -0.00080941996,
                -0.021264847,
                0.003279078,
                0.019305335,
                -0.01985731,
                -0.007548262,
                -0.008983398,
                0.038638268,
                0.018629165,
                0.035078026,
                0.022920772,
                0.011674277,
                -0.010528929,
                0.036016386,
                -0.002721928,
                0.012792027,
                0.020409286,
                -0.016545458,
                -0.011246496,
                0.012736829,
                -0.0065616057,
                0.0043847533,
                0.028895905,
                0.012585036,
                -0.0036257876,
                0.015262116,
                -0.0033791235,
                -0.02769536,
                0.010308138,
                0.004170863,
                -0.020588677,
                -0.0047159386,
                0.006520208,
                -0.02541846,
                0.00081890705,
                0.008100237,
                -0.0015438058,
                -0.004336456,
                0.0152207175,
                0.02588764,
                0.04059778,
                0.002302772,
                -0.006875542,
                0.0074240672,
                0.0010754893,
                0.023914328,
                -0.00066582015,
                -0.024521502,
                -0.011412089,
                -0.017580412,
                0.012440142,
                -0.037065137,
                -0.0019767615,
                0.0020216093,
                0.024935482,
                -0.011625979,
                0.005871637,
                -0.013426798,
                -0.019705517,
                0.012226252,
                -0.01629707,
                -0.0047918353,
                0.013123211,
                -0.0048297835,
                -0.025487458,
                0.016021082,
                -0.027032988,
                0.017911598,
                -0.018684363,
                -0.037423924,
                -0.0010280539,
                0.0039017752,
                0.0025045876,
                -0.012605735,
                -0.021320045,
                -0.020768069,
                0.0033980978,
                -0.012557438,
                -0.002275173,
                0.0061959224,
                -0.0069514383,
                -0.0027046788,
                0.009121391,
                -0.02343135,
                -0.005243765,
                0.02272758,
                -0.016269471,
                -0.04951218,
                -0.00073481706,
                -0.029641071,
                -0.009217987,
                0.00490568,
                -0.0073274714,
                -0.0045227474,
                0.00007789104,
                -0.006292518,
                0.00980446,
                -0.005267914,
                0.016642055,
                0.02390053,
                -0.011315493,
                0.033090916,
                0.021016458,
                -0.0011763973,
                -0.009866558,
                0.009438777,
                -0.042088114,
                0.02343135,
                -0.0028875207,
                0.019098343,
                -0.017125033,
                -0.00025852278,
                0.012226252,
                -0.00005258319,
                -0.008576316,
                0.004063918,
                0.015068925,
                0.0065961042,
                0.026011834,
                0.0005256702,
                0.009197288,
                0.003943173,
                0.02722618,
                -0.011370691,
                0.010694521,
                -0.021320045,
                0.055059534,
                0.020436885,
                0.01759421,
                -0.01987111,
                -0.013757983,
                -0.0026425815,
                -0.013654488,
                0.0064339614,
                0.007982942,
                0.013206008,
                0.008120936,
                0.006778946,
                -0.0016335018,
                0.011074004,
                0.041122157,
                -0.029309886,
                0.00079907046,
                -0.006847943,
                -0.0013368151,
                0.035740398,
                0.0019681368,
                -0.009894157,
                -0.021513237,
                -0.0034688194,
                0.038113892,
                0.0068858913,
                0.024976881,
                0.00059337344,
                0.03264934,
                -0.005309312,
                0.048905008,
                0.003365324,
                0.015717495,
                0.012171054,
                0.020616276,
                -0.0017611461,
                0.010549627,
                -0.009190388,
                0.022327399,
                0.013364701,
                -0.0035119427,
                0.010811815,
                0.0016481637,
                0.011777773,
                -0.032483745,
                0.010791116,
                -0.0022234253,
                -0.022244602,
                -0.003191107,
                0.0107290195,
                -0.0049850265,
                0.010832515,
                0.015041326,
                0.029999856,
                0.025473658,
                -0.011681177,
                0.0015343188,
                0.003322201,
                -0.012785127,
                0.0075344625,
                0.008590115,
                -0.0064098127,
                0.0004303682,
                0.008866102,
                -0.0016153901,
                0.0010642773,
                0.01316461,
                0.0067961956,
                0.01003905,
                -0.010397834,
                -0.005750892,
                0.03546441,
                -0.010246041,
                -0.03306332,
                0.005181668,
                -0.009300783,
                0.001617115,
                0.0067478977,
                -0.0015446682,
                0.01048753,
                -0.006603004,
                0.011660477,
                0.035823196,
                0.0075896597,
                0.017470017,
                -0.004057018,
                -0.011701875,
                0.007962244,
                0.0047159386,
                -0.008410723,
                0.016683452,
                0.01763561,
                0.0026063581,
                0.0021509787,
                0.0062062717,
                -0.012433243,
                0.05376239,
                -0.013419898,
                -0.023679739,
                -0.037065137,
                -0.012357346,
                -0.038279485,
                0.010149445,
                -0.002678805,
                -0.03237335,
                0.0334773,
                0.008969598,
                -0.0014273735,
                0.006758247,
                -0.016448863,
                0.034001675,
                0.0009788936,
                -0.003974222,
                -0.012474641,
                -0.014779137,
                0.008769507,
                0.060938068,
                0.019746915,
                -0.0057163937,
                0.0022406746,
                0.006223521,
                -0.029199492,
                -0.009832059,
                0.001216933,
                0.0040915166,
                -0.0034653698,
                -0.014378956,
                -0.009100692,
                0.005374859,
                -0.0008240818,
                -0.000062528445,
                0.0020060851,
                0.0050057257,
                -0.017138831,
                -0.0015265566,
                -0.0083279265,
                -0.023058766,
                0.0069341892,
                -0.021954816,
                0.023997124,
                0.004757337,
                0.024204114,
                0.045179177,
                0.02563925,
                0.011743274,
                -0.025170073,
                -0.01718023,
                0.0038258785,
                0.0025839342,
                0.02075427,
                -0.0049574277,
                0.015786493,
                0.0018215184,
                0.00020440335,
                0.006009631,
                0.017897798,
                0.0070997817,
                0.015800292,
                0.0012807552,
                0.009424978,
                0.018463572,
                -0.0077276537,
                0.0055646007,
                0.001048753,
                0.009093792,
                -0.0074654655,
                0.025804844,
                -0.0116397785,
                -0.002054383,
                -0.0004398553,
                0.0063718646,
                0.02319676,
                -0.023983326,
                -0.03215256,
                0.004553796,
                -0.01759421,
                -0.02566685,
                0.017994393,
                0.03596119,
                -0.007058384,
                -0.01742862,
                -0.027239978,
                -0.018932752,
                0.0047814855,
                -0.037203133,
                -0.0063097673,
                -0.011191298,
                -0.012916221,
                -0.032732133,
                -0.0037292829,
                0.04526197,
                0.013281905,
                0.03615438,
                -0.0051023215,
                0.0070997817,
                -0.018491171,
                -0.005982032,
                -0.015206918,
                -0.002318296,
                -0.021361442,
                -0.011418988,
                0.015358712,
                0.008831604,
                -0.004481349,
                -0.005533552,
                0.0033135766,
                0.028840708,
                -0.0038293283,
                0.012329747,
                -0.021554634,
                0.0068168943,
                0.007072183,
                -0.008176134,
                0.015055126,
                0.001650751,
                -0.0011306868,
                -0.005913035,
                -0.020561079,
                0.0067444476,
                -0.01918114,
                -0.0030738122,
                -0.0058888863,
                -0.006554706,
                -0.01809099,
                -0.020119498,
                -0.0084314225,
                0.0050505735,
                -0.008445222,
                0.007279174,
                0.020657673,
                0.016807647,
                0.013978774,
                0.013323303,
                0.0065719555,
                0.030165449,
                -0.014351357,
                0.010370235,
                -0.014861934,
                0.02390053,
                0.0010194293,
                -0.028813109,
                0.01965032,
                -0.007568961,
                -0.052989624,
                -0.00084564334,
                0.007941544,
                0.011867468,
                0.017773604,
                -0.0031410842,
                -0.031628184,
                -0.025970437,
                -0.014378956,
                -0.02543226,
                0.016973238,
                0.00019653338,
                -0.0043157567,
                -0.012357346,
                -0.006558156,
                0.0044778995,
                0.0013523394,
                0.008990297,
                -0.027488368,
                0.007382669,
                0.008141635,
                -0.017952995,
                0.015800292,
                0.0062338705,
                0.010839414,
                -0.0070031863,
                -0.01918114,
                0.0020457583,
                -0.0156209,
                -0.017373422,
                -0.015082724,
                0.018422175,
                0.032676935,
                0.045786347,
                0.0013230157,
                0.017704606,
                -0.026439615,
                -0.021913419,
                0.0018232433,
                0.0057163937,
                0.0033066769,
                -0.008983398,
                -0.023486547,
                0.03477444,
                0.014530749,
                0.020616276,
                0.011494885,
                -0.005643947,
                0.012157255,
                -0.008976498,
                -0.002142354,
                0.00300999,
                -0.021582233,
                0.009293883,
                0.004143264,
                -0.007430967,
                0.02097506,
                -0.014144366,
                -0.009528473,
                0.02143044,
                -0.0026184327,
                -0.020464484,
                -0.026508613,
                0.022465393,
                -0.015179319,
                0.035547208,
                -0.0011117127,
                0.009328382,
                -0.0029875662,
                -0.01582789,
                -0.018849956,
                -0.0006283031,
                -0.0075137634,
                -0.010459932,
                -0.0007744903,
                0.021333843,
                0.0142409615,
                0.011446587,
                -0.011757073,
                -0.014572147,
                -0.018905153,
                -0.014792937,
                -0.020022903,
                -0.011922666,
                0.000068134446,
                -0.03146259,
                -0.0005722431,
                0.00981826,
                0.028675115,
                -0.022934573,
                0.0028875207,
                -0.022810377,
                -0.017056035,
                -0.0035602404,
                -0.0036464867,
                -0.0024286911,
                0.0036361371,
                0.007430967,
                0.00491258,
                -0.018877555,
                -0.007030785,
                -0.025942838,
                0.0009918306,
                -0.017663209,
                0.006230421,
                0.024590498,
                -0.030275844,
                -0.025653051,
                0.011108502,
                0.007230876,
                -0.012826526,
                -0.032235354,
                0.0027322776,
                -0.014323758,
                0.0026046333,
                -0.0050505735,
                -0.0071204808,
                -0.015441508,
                0.022603387,
                -0.0066858004,
                0.0044503007,
                0.0047228383,
                -0.0075344625,
                -0.023417551,
                0.020395486,
                -0.019360533,
                0.03143499,
                0.005378309,
                0.00400872,
                0.00446065,
                0.00010495076,
                -0.012688532,
                0.014875733,
                -0.015055126,
                0.0290063,
                0.0071480796,
                0.0073964684,
                0.012529839,
                0.0000688891,
                0.010259841,
                -0.007251575,
                -0.0057543423,
                0.028868306,
                -0.016186675,
                -0.0016455762,
                -0.002432141,
                0.004709039,
                -0.013709686,
                -0.01270923,
                -0.016655853,
                -0.01607628,
                0.0018715411,
                -0.014972329,
                0.036761552,
                -0.011329292,
                -0.00035166863,
                0.00015686016,
                -0.028509522,
                -0.014903332,
                -0.04998136,
                0.001596416,
                -0.003099686,
                -0.028454324,
                -0.03996301,
                -0.009783762,
                0.0245767,
                0.01629707,
                0.019029347,
                -0.008638413,
                0.015427709,
                0.0004933279,
                -0.028647516,
                0.008797105,
                -0.0054059075,
                0.0030531131,
                -0.04065298,
                0.004981577,
                -0.025570255,
                -0.025515057,
                0.011080903,
                0.0089350995,
                -0.034001675,
                -0.011080903,
                0.01716643,
                -0.013254306,
                -0.0093421815,
                0.0016585132,
                0.025239069,
                0.028164538,
                0.025018279,
                -0.010156345,
                -0.0142409615,
                0.0065305573,
                -0.0026926044,
                0.009666467,
                -0.00980446,
                -0.048325434,
                -0.0013092164,
                -0.01450315,
                -0.013481996,
                0.036871947,
                0.003998371,
                0.0054093576,
                0.0032325052,
                0.008514218,
                -0.0071756784,
                -0.0083279265,
                -0.0011634603,
                -0.004757337,
                -0.0099838525,
                0.025142474,
                0.00084262475,
                0.004412352,
                -0.0054542054,
                0.017746005,
                0.011632878,
                0.035133224,
                -0.03866587,
                0.00081200735,
                0.0045020483,
                0.000525239,
                -0.017552814,
                -0.014420354,
                0.0054576555,
                0.04666951,
                -0.00059337344,
                -0.030469034,
                -0.025266668,
                0.0035843893,
                -0.021720227,
                -0.0038327782,
                0.029530676,
                0.0037637814,
                0.0056749955,
                0.021996215,
                -0.030220646,
                0.0046503916,
                -0.0077069546,
                -0.00032816656,
                -0.0094111785,
                -0.006451211,
                -0.0133992,
                0.003725833,
                0.0041570636,
                -0.012460842,
                -0.022465393,
                -0.005471455,
                -0.003912125,
                0.01806339,
                0.010818715,
                0.02319676,
                -0.020091899,
                -0.01919494,
                -0.020009104,
                -0.0024166168,
                0.027736757,
                0.0015213818,
                -0.0062994175,
                -0.03750672,
                -0.022575788,
                -0.017318225,
                0.019084545,
                -0.0014653219,
                -0.013406099,
                -0.007161879,
                -0.0018146187,
                -0.013316403,
                -0.011991663,
                -0.017773604,
                -0.009942454,
                0.01716643,
                0.022189405,
                -0.007700055,
                -0.022617185,
                0.031048609,
                0.011481086,
                -0.012571237,
                0.014806736,
                -0.0046710907,
                0.0070342347,
                0.0028737213,
                0.023790134,
                -0.020381687,
                -0.014930931,
                0.003912125,
                -0.02385913,
                0.028951103,
                -0.002073357,
                0.013992573,
                -0.009445677,
                -0.01850497,
                0.010846314,
                -0.016172875,
                -0.017056035,
                -0.01316461,
                -0.008079538,
                0.0018163436,
                0.009093792,
                -0.005378309,
                0.0033549746,
                -0.034526054,
                -0.00580609,
                0.03391888,
                -0.036982343,
                -0.015924487,
                -0.012157255,
                -0.017566612,
                -0.015137922,
                0.015124123,
                0.23028408,
                0.013475096,
                -0.020216094,
                0.03615438,
                0.0059958315,
                0.00038875444,
                0.02029889,
                -0.0025494357,
                0.008341726,
                0.00058129895,
                0.013737285,
                0.015731296,
                -0.0245767,
                -0.0047814855,
                0.021113053,
                -0.007927745,
                -0.022244602,
                -0.0132267075,
                -0.017138831,
                -0.006496059,
                -0.0023562445,
                0.011018806,
                0.0019784863,
                -0.017497616,
                0.015689896,
                0.0057888404,
                -0.010577226,
                -0.01894655,
                0.0030168898,
                -0.0077759516,
                -0.011322392,
                -0.020478282,
                -0.011839869,
                -0.012861024,
                0.019346733,
                -0.0028512971,
                0.0008900601,
                0.011957164,
                0.0057715913,
                0.005419707,
                0.02120965,
                -0.012522939,
                0.014213363,
                -0.014102968,
                -0.026674205,
                -0.00083831244,
                -0.026908794,
                -0.013806282,
                -0.0076172585,
                0.0006313217,
                -0.031186603,
                -0.006585755,
                0.02743317,
                0.05177528,
                -0.00034131907,
                -0.02053348,
                0.016628254,
                -0.008010541,
                -0.020036701,
                0.006064828,
                -0.032732133,
                0.030055054,
                0.00513337,
                -0.006789296,
                -0.010294339,
                0.017897798,
                -0.020657673,
                -0.010653122,
                -0.0054059075,
                -0.014475551,
                0.010087348,
                -0.007410268,
                0.00847972,
                0.0079898415,
                -0.00913519,
                -0.013461296,
                0.0037775808,
                0.017759804,
                0.003929374,
                0.022824178,
                -0.010694521,
                -0.008528017,
                -0.003322201,
                0.003991471,
                -0.011067104,
                -0.016255671,
                -0.0040121702,
                0.022589589,
                0.0071480796,
                0.029171893,
                -0.00068695046,
                -0.026177427,
                -0.023348553,
                -0.0020595577,
                -0.007748353,
                0.003417072,
                0.010591025,
                0.039797418,
                -0.017511414,
                -0.005385209,
                -0.019843511,
                0.036237177,
                -0.0040915166,
                -0.00006085743,
                0.016614456,
                -0.012343546,
                0.005043674,
                0.023141563,
                -0.0064822594,
                -0.034802042,
                0.0069755875,
                -0.042667687,
                0.009880357,
                -0.0013066289,
                -0.015234517,
                -0.0103219375,
                0.001362689,
                -0.0053886585,
                0.0020181595,
                0.011998562,
                0.0039017752,
                -0.0060993265,
                0.005040224,
                0.012405644,
                -0.003282528,
                -0.017511414,
                -0.0020009102,
                -0.013316403,
                -0.00490223,
                -0.03477444,
                0.00847972,
                -0.025984235,
                0.004198462,
                -0.015910687,
                -0.0267708,
                0.005909585,
                -0.017511414,
                0.012467741,
                -0.0030255143,
                -0.002318296,
                0.007072183,
                0.015662298,
                -0.01763561,
                -0.0032894276,
                0.016973238,
                -0.019995304,
                0.014820536,
                -0.000199552,
                -0.016131477,
                -0.027308976,
                -0.0038327782,
                -0.023928128,
                0.0059923814,
                -0.012005462,
                0.008065739,
                0.030607028,
                -0.020423084,
                -0.01471014,
                0.0043330058,
                0.019953907,
                -0.028509522,
                -0.018035792,
                0.017732205,
                -0.014461752,
                -0.007230876,
                -0.013771783,
                -0.1783984,
                0.01720783,
                0.016117677,
                -0.0075551616,
                0.012688532,
                0.012164155,
                0.035160825,
                0.021278646,
                -0.032235354,
                0.017194029,
                0.014834335,
                0.004960878,
                -0.016683452,
                -0.0099838525,
                -0.0024907885,
                -0.03654076,
                -0.016393665,
                0.0149171315,
                0.0003712896,
                0.037120335,
                0.01428236,
                -0.0028081741,
                0.02253439,
                -0.0023959177,
                -0.0178426,
                0.0020871565,
                -0.0007550849,
                0.03433286,
                -0.00014058119,
                -0.018932752,
                0.015041326,
                -0.018491171,
                0.0075758607,
                -0.009238686,
                0.0053714095,
                -0.0047159386,
                -0.0025822092,
                0.022396397,
                -0.008610814,
                -0.006202822,
                0.0033722238,
                0.027460769,
                0.009349081,
                -0.006937639,
                -0.010694521,
                0.014130566,
                0.014654943,
                -0.009866558,
                0.00022208379,
                -0.027736757,
                0.017194029,
                -0.027322775,
                0.012640233,
                -0.0078035505,
                0.0074240672,
                0.013895977,
                -0.0015394936,
                0.024162717,
                -0.011991663,
                -0.017083634,
                -0.013344002,
                -0.031297,
                0.009176589,
                -0.007210177,
                -0.02609463,
                -0.016904242,
                -0.0019457128,
                0.0057888404,
                -0.010045949,
                0.017897798,
                0.004567595,
                -0.024797488,
                -0.010618624,
                -0.0028478473,
                0.02031269,
                -0.0061752233,
                -0.021016458,
                -0.016048681,
                -0.012433243,
                -0.0026218826,
                -0.0028512971,
                0.05690865,
                0.014102968,
                0.013288804,
                -0.008859203,
                0.022134207,
                -0.018780958,
                -0.009535372,
                -0.00051402696,
                0.010114946,
                -0.013019716,
                -0.0029875662,
                0.013054215,
                -0.009535372,
                -0.002345895,
                0.025597854,
                -0.009507773,
                0.00027318462,
                0.0005804365,
                0.00019523969,
                0.006313217,
                -0.013744184,
                -0.009031695,
                0.03033104,
                0.037865505,
                0.018877555,
                0.010860113,
                0.042584892,
                0.033587694,
                -0.011439688,
                -0.03171098,
                0.013130112,
                -0.0002348051,
                0.049043003,
                0.023486547,
                0.029585874,
                0.0016291895,
                -0.010135646,
                -0.004605544,
                -0.024452504,
                0.038279485,
                -0.030469034,
                -0.037782706,
                0.016310869,
                0.017276825,
                0.0036671855,
                -0.097644426,
                -0.027929949,
                0.010466831,
                0.01405467,
                -0.009528473,
                0.02766776,
                -0.003322201,
                0.042805683,
                0.0059647826,
                0.023831531,
                0.008100237,
                -0.0032187058,
                -0.0028530222,
                0.02098886,
                0.009424978,
                0.0067030494,
                -0.0049263793,
                -0.020906063,
                -0.009783762,
                0.018408375,
                -0.017759804,
                -0.009286984,
                -0.011901966,
                -0.027998945,
                -0.016683452,
                -0.024907883,
                -0.03322891,
                0.004415802,
                0.022879375,
                0.02634302,
                0.023293355,
                -0.023583144,
                -0.030496633,
                -0.025942838,
                -0.0020647324,
                -0.021030258,
                -0.02988946,
                0.0074171675,
                0.0071204808,
                -0.03888666,
                0.013302604,
                -0.014530749,
                0.013199109,
                -0.023997124,
                -0.000064576794,
                -0.013537194,
                -0.0267708,
                0.05310002,
                0.024190316,
                -0.0027892,
                -0.017028436,
                -0.0109636085,
                0.014530749,
                -0.013040416,
                0.02276898,
                -0.02407992,
                0.019263936,
                -0.000110610665,
                -0.028978702,
                0.0039466233,
                0.021458039,
                0.030165449,
                -0.01272993,
                0.01426856,
                0.023790134,
                0.005778491,
                -0.018560167,
                -0.0020492082,
                0.018822357,
                0.009631968,
                -0.014309959,
                0.02475609,
                -0.04065298,
                -0.0021044058,
                -0.0033377255,
                -0.00624077,
                -0.035878394,
                -0.018325578,
                0.021720227,
                -0.008735009,
                0.013744184,
                -0.008672912,
                -0.010121847,
                -0.013709686,
                0.008148535,
                0.026743202,
                -0.028040344,
                0.0041570636,
                -0.013716585,
                -0.009017896,
                0.004336456,
                0.02563925,
                0.047028292,
                -0.013709686,
                -0.023748735,
                0.0037223832,
                -0.03609918,
                0.0052058166,
                0.011439688,
                -0.0049263793,
                -0.018849956,
                -0.0011824345,
                -0.067506574,
                0.028454324,
                0.024562899,
                -0.01629707,
                0.004643492,
                0.0013083539,
                0.050671328,
                -0.022368798,
                0.020823266,
                0.0056577465,
                -0.048987806,
                0.017442418,
                -0.00714118,
                0.0013437148,
                -0.030386237,
                -0.02743317,
                0.030303443,
                0.013012817,
                0.022906974,
                0.003260104,
                0.00826583,
                -0.005661196,
                0.004063918,
                0.0044951485,
                -0.011487985,
                0.014109868,
                -0.01763561,
                0.019374331,
                -0.019553723,
                -0.012529839,
                0.018159986,
                -0.027833352,
                -0.0038741764,
                0.016918043,
                -0.0047849356,
                -0.023362353,
                -0.013109412,
                0.015938286,
                0.00150672,
                -0.024880284,
                -0.012012362,
                -0.0068203444,
                -0.018008193,
                -0.000070775735,
                -0.007624158,
                0.024852686,
                0.0017352722,
                -0.0072446754,
                0.013419898,
                0.01603488,
                0.025915239,
                0.0026201576,
                -0.0024580148,
                -0.028247334,
                -0.029723868,
                -0.041398145,
                0.015068925,
                0.0057439925,
                0.037175532,
                -0.003499868,
                0.015814092,
                0.0057025943,
                0.027557366,
                -0.0050126254,
                0.0135992905,
                -0.013219807,
                0.008983398,
                0.0008702235,
                0.005557701,
                -0.03518842,
                -0.021609832,
                0.0034912436,
                -0.0037120336,
                -0.016559258,
                0.00869361,
                -0.002451115,
                0.0028219735,
                -0.03369809,
                0.00023847056,
                0.022023814,
                0.009355981,
                -0.011336192,
                -0.023776334,
                0.005019525,
                0.02275518,
                0.0025822092,
                0.0038327782,
                0.01741482,
                -0.023734936,
                0.0267708,
                -0.03731353,
                -0.007969143,
                -0.02275518,
                -0.020933662,
                -0.011536283,
                0.0014679092,
                0.025032079,
                0.006440861,
                -0.0030220645,
                0.003839678,
                0.007568961,
                0.016628254,
                0.0020371338,
                -0.014337557,
                -0.011260295,
                0.024907883,
                -0.006306317,
                -0.010087348,
                0.011763973,
                0.018477373,
                0.0037672312,
                -0.020850865,
                0.03171098,
                0.010473731,
                0.005733643,
                0.0032514792,
                -0.013992573,
                -0.040238995,
                -0.024880284,
                0.030165449,
                0.0015990033,
                0.009086893,
                -0.009611269,
                0.0066168034,
                0.006713399,
                0.006333916,
                0.016890444,
                -0.02054728,
                0.011688076,
                0.020561079,
                -0.01941573,
                -0.027819553,
                -0.009521573,
                -0.011087803,
                -0.019222539,
                -0.011653578,
                -0.010680721,
                0.02476989,
                -0.021361442,
                0.072915934,
                -0.0026857047,
                -0.0074654655,
                0.028702714,
                -0.020188496,
                0.024700893,
                0.022203205,
                -0.012012362,
                -0.0056163482,
                -0.021223448,
                0.029585874,
                -0.017263027,
                -0.0003048801,
                -0.01829798,
                -0.011853669,
                -0.008403824,
                0.02166503,
                0.0093076825,
                -0.0290063,
                -0.0026736301,
                0.003912125,
                -0.0043399055,
                -0.0043813037,
                0.007548262,
                0.0018128938,
                -0.0048125344,
                0.019512326,
                0.00018726192,
                -0.006961788,
                -0.04374404,
                0.013861479,
                0.0057060444,
                -0.025597854,
                -0.016586857,
                -0.020229893,
                -0.006047579,
                -0.004733188,
                0.017401021,
                0.013764883,
                -0.011094702,
                0.0054335063,
                0.025777245,
                -0.00915589,
                0.014144366,
                -0.017111233,
                -0.009521573,
                0.004557246,
                -0.012702331,
                -0.029116696 };
            // Convert the double array into a float array:
            var expectedVectors = new float[vectors.Length];
            for (var i = 0; i < vectors.Length; i++)
            {
                expectedVectors[i] = (float)vectors[i];
            }

            var input = "Can you show me sales orders and quantities of size L racing socks?";
            var sessionId = "0959186c-834d-4c68-9f04-e73ffb8e2ac7";
            var expectedResponse = (expectedVectors, expectedTokens);
            _openAiServiceMock.Setup(s => s.GetEmbeddingsAsync(input, sessionId))
                .ReturnsAsync(expectedResponse);

            // Act
            var service = _openAiServiceMock.Object;
            var (response, responseTokens) = await service.GetEmbeddingsAsync(input, sessionId);

            // Assert
            Assert.AreEqual(expectedResponse.expectedVectors, response);
            Assert.AreEqual(expectedResponse.expectedTokens, responseTokens);
        }

        [Test]
        public async Task GetEmbeddingsAsync_WithInputOnly_ShouldReturnEmbeddingsAndTokens()
        {
            // Arrange
            var expectedTokens = 1530;
            var vectors = new[] {
                0.005778491,
                -0.016172875,
                -0.0031324597,
                -0.016228072,
                -0.029944658,
                0.004308857,
                -0.012108957,
                0.0063960133,
                -0.025404662,
                -0.024976881,
                0.027819553,
                0.0005735368,
                -0.009618169,
                -0.0027943747,
                0.0045710453,
                -0.0005243765,
                0.012522939,
                -0.023624541,
                0.005150619,
                -0.025584053,
                -0.006447761,
                0.019277737,
                -0.006313217,
                -0.007872547,
                -0.007893247,
                -0.020919863,
                0.020768069,
                -0.0025804844,
                -0.009418078,
                -0.019153541,
                0.0178564,
                0.007027335,
                -0.011501784,
                -0.020768069,
                -0.017359622,
                0.006713399,
                0.015662298,
                0.005488704,
                0.011267195,
                -0.02252059,
                0.008672912,
                0.0290339,
                0.01272303,
                -0.021678828,
                -0.0039086747,
                0.0022423996,
                -0.011067104,
                -0.0071687787,
                -0.00803814,
                0.009017896,
                0.0000970808,
                0.017497616,
                -0.0138683785,
                -0.021347644,
                -0.0048780814,
                0.009355981,
                0.035850793,
                0.021333843,
                0.021982415,
                -0.011736374,
                0.0058336887,
                0.009045495,
                -0.03593359,
                0.0022803477,
                -0.014020172,
                -0.0054749046,
                0.0010108047,
                -0.005450756,
                -0.012660933,
                -0.017994393,
                -0.0015472557,
                0.006634053,
                -0.018228984,
                -0.011432787,
                0.007893247,
                -0.0048780814,
                -0.0040742676,
                0.004329556,
                0.012902422,
                -0.008072638,
                0.01538631,
                -0.014434153,
                0.0001642989,
                0.0155243045,
                0.019125942,
                0.039852615,
                0.005730193,
                0.0113016935,
                -0.02566685,
                0.018408375,
                0.014779137,
                0.0024183416,
                0.00017960758,
                0.009611269,
                -0.0049953763,
                0.004402003,
                -0.0357128,
                0.023748735,
                0.01049443,
                -0.04106696,
                0.013668288,
                0.0014670468,
                -0.006064828,
                -0.014296159,
                -0.02075427,
                -0.0055818497,
                -0.0006688388,
                0.0015774418,
                0.0013100788,
                -0.0045227474,
                -0.009045495,
                0.039328236,
                0.035547208,
                -0.0040811673,
                0.015938286,
                -0.0052161664,
                0.017249227,
                -0.005557701,
                -0.023417551,
                -0.029171893,
                0.02815074,
                0.01181917,
                0.02786095,
                -0.014047771,
                -0.003325651,
                0.002054383,
                -0.01653166,
                -0.013895977,
                -0.02519767,
                0.01271613,
                0.033118516,
                0.017663209,
                -0.0035498908,
                0.014475551,
                -0.02431451,
                0.03077262,
                -0.016435064,
                0.024825087,
                -0.034277663,
                -0.0122814495,
                -0.008341726,
                0.03102101,
                0.012150356,
                0.00041915622,
                0.006223521,
                0.017718406,
                0.01315771,
                -0.009694066,
                -0.012433243,
                -0.035547208,
                0.035850793,
                -0.00023264895,
                0.020409286,
                0.012930021,
                0.006979037,
                -0.029558275,
                0.0008559929,
                0.025349464,
                -0.021444239,
                -0.017704606,
                -0.011460386,
                -0.0051609688,
                0.011770872,
                -0.015965885,
                -0.011398289,
                0.03527122,
                0.05218926,
                -0.024093721,
                -0.0026460313,
                -0.011688076,
                -0.004633142,
                0.010618624,
                -0.0046779905,
                0.015289715,
                0.008900601,
                0.021596031,
                0.0050540236,
                -0.030220646,
                0.003147984,
                -0.007976042,
                0.00713428,
                0.02031269,
                0.020464484,
                0.017511414,
                -0.0074447664,
                -0.012067559,
                0.00056016864,
                -0.027253779,
                0.0013687261,
                -0.01716643,
                0.00083141273,
                0.012798927,
                -0.030110251,
                -0.0200781,
                -0.6451487,
                -0.033891283,
                0.0017275101,
                -0.02631542,
                0.027184783,
                0.009238686,
                0.01675245,
                0.014682542,
                -0.020878464,
                0.010777317,
                0.0045710453,
                0.026053233,
                -0.0076586567,
                -0.012012362,
                0.00782425,
                -0.020022903,
                0.01876716,
                0.004867732,
                0.013813181,
                0.013054215,
                -0.019581322,
                0.0021699527,
                0.025390862,
                0.014144366,
                0.027488368,
                0.016090078,
                -0.0009331832,
                0.005378309,
                0.016559258,
                0.01182607,
                -0.033587694,
                0.014420354,
                0.00624077,
                0.00267708,
                0.046283126,
                -0.032759733,
                -0.0093421815,
                0.017263027,
                0.0014204738,
                0.043026473,
                -0.015193119,
                -0.0059854817,
                0.0056853453,
                -0.013675187,
                -0.0029323685,
                0.010446132,
                0.007838049,
                -0.0011444862,
                -0.0043847533,
                0.0020129848,
                -0.013550993,
                0.018780958,
                -0.026149828,
                0.002942718,
                0.036733955,
                0.00356714,
                0.029806664,
                0.014654943,
                0.013723485,
                0.019981505,
                0.007382669,
                0.005664646,
                -0.019719316,
                -0.022465393,
                0.0086660115,
                0.023044968,
                -0.024452504,
                -0.018877555,
                0.019305335,
                -0.003080712,
                -0.0025511608,
                0.012578136,
                -0.011632878,
                0.038031094,
                -0.007769052,
                0.019802112,
                -0.00085987395,
                0.0069755875,
                -0.021982415,
                -0.0071756784,
                -0.0024148917,
                0.0011099877,
                -0.00080941996,
                -0.021264847,
                0.003279078,
                0.019305335,
                -0.01985731,
                -0.007548262,
                -0.008983398,
                0.038638268,
                0.018629165,
                0.035078026,
                0.022920772,
                0.011674277,
                -0.010528929,
                0.036016386,
                -0.002721928,
                0.012792027,
                0.020409286,
                -0.016545458,
                -0.011246496,
                0.012736829,
                -0.0065616057,
                0.0043847533,
                0.028895905,
                0.012585036,
                -0.0036257876,
                0.015262116,
                -0.0033791235,
                -0.02769536,
                0.010308138,
                0.004170863,
                -0.020588677,
                -0.0047159386,
                0.006520208,
                -0.02541846,
                0.00081890705,
                0.008100237,
                -0.0015438058,
                -0.004336456,
                0.0152207175,
                0.02588764,
                0.04059778,
                0.002302772,
                -0.006875542,
                0.0074240672,
                0.0010754893,
                0.023914328,
                -0.00066582015,
                -0.024521502,
                -0.011412089,
                -0.017580412,
                0.012440142,
                -0.037065137,
                -0.0019767615,
                0.0020216093,
                0.024935482,
                -0.011625979,
                0.005871637,
                -0.013426798,
                -0.019705517,
                0.012226252,
                -0.01629707,
                -0.0047918353,
                0.013123211,
                -0.0048297835,
                -0.025487458,
                0.016021082,
                -0.027032988,
                0.017911598,
                -0.018684363,
                -0.037423924,
                -0.0010280539,
                0.0039017752,
                0.0025045876,
                -0.012605735,
                -0.021320045,
                -0.020768069,
                0.0033980978,
                -0.012557438,
                -0.002275173,
                0.0061959224,
                -0.0069514383,
                -0.0027046788,
                0.009121391,
                -0.02343135,
                -0.005243765,
                0.02272758,
                -0.016269471,
                -0.04951218,
                -0.00073481706,
                -0.029641071,
                -0.009217987,
                0.00490568,
                -0.0073274714,
                -0.0045227474,
                0.00007789104,
                -0.006292518,
                0.00980446,
                -0.005267914,
                0.016642055,
                0.02390053,
                -0.011315493,
                0.033090916,
                0.021016458,
                -0.0011763973,
                -0.009866558,
                0.009438777,
                -0.042088114,
                0.02343135,
                -0.0028875207,
                0.019098343,
                -0.017125033,
                -0.00025852278,
                0.012226252,
                -0.00005258319,
                -0.008576316,
                0.004063918,
                0.015068925,
                0.0065961042,
                0.026011834,
                0.0005256702,
                0.009197288,
                0.003943173,
                0.02722618,
                -0.011370691,
                0.010694521,
                -0.021320045,
                0.055059534,
                0.020436885,
                0.01759421,
                -0.01987111,
                -0.013757983,
                -0.0026425815,
                -0.013654488,
                0.0064339614,
                0.007982942,
                0.013206008,
                0.008120936,
                0.006778946,
                -0.0016335018,
                0.011074004,
                0.041122157,
                -0.029309886,
                0.00079907046,
                -0.006847943,
                -0.0013368151,
                0.035740398,
                0.0019681368,
                -0.009894157,
                -0.021513237,
                -0.0034688194,
                0.038113892,
                0.0068858913,
                0.024976881,
                0.00059337344,
                0.03264934,
                -0.005309312,
                0.048905008,
                0.003365324,
                0.015717495,
                0.012171054,
                0.020616276,
                -0.0017611461,
                0.010549627,
                -0.009190388,
                0.022327399,
                0.013364701,
                -0.0035119427,
                0.010811815,
                0.0016481637,
                0.011777773,
                -0.032483745,
                0.010791116,
                -0.0022234253,
                -0.022244602,
                -0.003191107,
                0.0107290195,
                -0.0049850265,
                0.010832515,
                0.015041326,
                0.029999856,
                0.025473658,
                -0.011681177,
                0.0015343188,
                0.003322201,
                -0.012785127,
                0.0075344625,
                0.008590115,
                -0.0064098127,
                0.0004303682,
                0.008866102,
                -0.0016153901,
                0.0010642773,
                0.01316461,
                0.0067961956,
                0.01003905,
                -0.010397834,
                -0.005750892,
                0.03546441,
                -0.010246041,
                -0.03306332,
                0.005181668,
                -0.009300783,
                0.001617115,
                0.0067478977,
                -0.0015446682,
                0.01048753,
                -0.006603004,
                0.011660477,
                0.035823196,
                0.0075896597,
                0.017470017,
                -0.004057018,
                -0.011701875,
                0.007962244,
                0.0047159386,
                -0.008410723,
                0.016683452,
                0.01763561,
                0.0026063581,
                0.0021509787,
                0.0062062717,
                -0.012433243,
                0.05376239,
                -0.013419898,
                -0.023679739,
                -0.037065137,
                -0.012357346,
                -0.038279485,
                0.010149445,
                -0.002678805,
                -0.03237335,
                0.0334773,
                0.008969598,
                -0.0014273735,
                0.006758247,
                -0.016448863,
                0.034001675,
                0.0009788936,
                -0.003974222,
                -0.012474641,
                -0.014779137,
                0.008769507,
                0.060938068,
                0.019746915,
                -0.0057163937,
                0.0022406746,
                0.006223521,
                -0.029199492,
                -0.009832059,
                0.001216933,
                0.0040915166,
                -0.0034653698,
                -0.014378956,
                -0.009100692,
                0.005374859,
                -0.0008240818,
                -0.000062528445,
                0.0020060851,
                0.0050057257,
                -0.017138831,
                -0.0015265566,
                -0.0083279265,
                -0.023058766,
                0.0069341892,
                -0.021954816,
                0.023997124,
                0.004757337,
                0.024204114,
                0.045179177,
                0.02563925,
                0.011743274,
                -0.025170073,
                -0.01718023,
                0.0038258785,
                0.0025839342,
                0.02075427,
                -0.0049574277,
                0.015786493,
                0.0018215184,
                0.00020440335,
                0.006009631,
                0.017897798,
                0.0070997817,
                0.015800292,
                0.0012807552,
                0.009424978,
                0.018463572,
                -0.0077276537,
                0.0055646007,
                0.001048753,
                0.009093792,
                -0.0074654655,
                0.025804844,
                -0.0116397785,
                -0.002054383,
                -0.0004398553,
                0.0063718646,
                0.02319676,
                -0.023983326,
                -0.03215256,
                0.004553796,
                -0.01759421,
                -0.02566685,
                0.017994393,
                0.03596119,
                -0.007058384,
                -0.01742862,
                -0.027239978,
                -0.018932752,
                0.0047814855,
                -0.037203133,
                -0.0063097673,
                -0.011191298,
                -0.012916221,
                -0.032732133,
                -0.0037292829,
                0.04526197,
                0.013281905,
                0.03615438,
                -0.0051023215,
                0.0070997817,
                -0.018491171,
                -0.005982032,
                -0.015206918,
                -0.002318296,
                -0.021361442,
                -0.011418988,
                0.015358712,
                0.008831604,
                -0.004481349,
                -0.005533552,
                0.0033135766,
                0.028840708,
                -0.0038293283,
                0.012329747,
                -0.021554634,
                0.0068168943,
                0.007072183,
                -0.008176134,
                0.015055126,
                0.001650751,
                -0.0011306868,
                -0.005913035,
                -0.020561079,
                0.0067444476,
                -0.01918114,
                -0.0030738122,
                -0.0058888863,
                -0.006554706,
                -0.01809099,
                -0.020119498,
                -0.0084314225,
                0.0050505735,
                -0.008445222,
                0.007279174,
                0.020657673,
                0.016807647,
                0.013978774,
                0.013323303,
                0.0065719555,
                0.030165449,
                -0.014351357,
                0.010370235,
                -0.014861934,
                0.02390053,
                0.0010194293,
                -0.028813109,
                0.01965032,
                -0.007568961,
                -0.052989624,
                -0.00084564334,
                0.007941544,
                0.011867468,
                0.017773604,
                -0.0031410842,
                -0.031628184,
                -0.025970437,
                -0.014378956,
                -0.02543226,
                0.016973238,
                0.00019653338,
                -0.0043157567,
                -0.012357346,
                -0.006558156,
                0.0044778995,
                0.0013523394,
                0.008990297,
                -0.027488368,
                0.007382669,
                0.008141635,
                -0.017952995,
                0.015800292,
                0.0062338705,
                0.010839414,
                -0.0070031863,
                -0.01918114,
                0.0020457583,
                -0.0156209,
                -0.017373422,
                -0.015082724,
                0.018422175,
                0.032676935,
                0.045786347,
                0.0013230157,
                0.017704606,
                -0.026439615,
                -0.021913419,
                0.0018232433,
                0.0057163937,
                0.0033066769,
                -0.008983398,
                -0.023486547,
                0.03477444,
                0.014530749,
                0.020616276,
                0.011494885,
                -0.005643947,
                0.012157255,
                -0.008976498,
                -0.002142354,
                0.00300999,
                -0.021582233,
                0.009293883,
                0.004143264,
                -0.007430967,
                0.02097506,
                -0.014144366,
                -0.009528473,
                0.02143044,
                -0.0026184327,
                -0.020464484,
                -0.026508613,
                0.022465393,
                -0.015179319,
                0.035547208,
                -0.0011117127,
                0.009328382,
                -0.0029875662,
                -0.01582789,
                -0.018849956,
                -0.0006283031,
                -0.0075137634,
                -0.010459932,
                -0.0007744903,
                0.021333843,
                0.0142409615,
                0.011446587,
                -0.011757073,
                -0.014572147,
                -0.018905153,
                -0.014792937,
                -0.020022903,
                -0.011922666,
                0.000068134446,
                -0.03146259,
                -0.0005722431,
                0.00981826,
                0.028675115,
                -0.022934573,
                0.0028875207,
                -0.022810377,
                -0.017056035,
                -0.0035602404,
                -0.0036464867,
                -0.0024286911,
                0.0036361371,
                0.007430967,
                0.00491258,
                -0.018877555,
                -0.007030785,
                -0.025942838,
                0.0009918306,
                -0.017663209,
                0.006230421,
                0.024590498,
                -0.030275844,
                -0.025653051,
                0.011108502,
                0.007230876,
                -0.012826526,
                -0.032235354,
                0.0027322776,
                -0.014323758,
                0.0026046333,
                -0.0050505735,
                -0.0071204808,
                -0.015441508,
                0.022603387,
                -0.0066858004,
                0.0044503007,
                0.0047228383,
                -0.0075344625,
                -0.023417551,
                0.020395486,
                -0.019360533,
                0.03143499,
                0.005378309,
                0.00400872,
                0.00446065,
                0.00010495076,
                -0.012688532,
                0.014875733,
                -0.015055126,
                0.0290063,
                0.0071480796,
                0.0073964684,
                0.012529839,
                0.0000688891,
                0.010259841,
                -0.007251575,
                -0.0057543423,
                0.028868306,
                -0.016186675,
                -0.0016455762,
                -0.002432141,
                0.004709039,
                -0.013709686,
                -0.01270923,
                -0.016655853,
                -0.01607628,
                0.0018715411,
                -0.014972329,
                0.036761552,
                -0.011329292,
                -0.00035166863,
                0.00015686016,
                -0.028509522,
                -0.014903332,
                -0.04998136,
                0.001596416,
                -0.003099686,
                -0.028454324,
                -0.03996301,
                -0.009783762,
                0.0245767,
                0.01629707,
                0.019029347,
                -0.008638413,
                0.015427709,
                0.0004933279,
                -0.028647516,
                0.008797105,
                -0.0054059075,
                0.0030531131,
                -0.04065298,
                0.004981577,
                -0.025570255,
                -0.025515057,
                0.011080903,
                0.0089350995,
                -0.034001675,
                -0.011080903,
                0.01716643,
                -0.013254306,
                -0.0093421815,
                0.0016585132,
                0.025239069,
                0.028164538,
                0.025018279,
                -0.010156345,
                -0.0142409615,
                0.0065305573,
                -0.0026926044,
                0.009666467,
                -0.00980446,
                -0.048325434,
                -0.0013092164,
                -0.01450315,
                -0.013481996,
                0.036871947,
                0.003998371,
                0.0054093576,
                0.0032325052,
                0.008514218,
                -0.0071756784,
                -0.0083279265,
                -0.0011634603,
                -0.004757337,
                -0.0099838525,
                0.025142474,
                0.00084262475,
                0.004412352,
                -0.0054542054,
                0.017746005,
                0.011632878,
                0.035133224,
                -0.03866587,
                0.00081200735,
                0.0045020483,
                0.000525239,
                -0.017552814,
                -0.014420354,
                0.0054576555,
                0.04666951,
                -0.00059337344,
                -0.030469034,
                -0.025266668,
                0.0035843893,
                -0.021720227,
                -0.0038327782,
                0.029530676,
                0.0037637814,
                0.0056749955,
                0.021996215,
                -0.030220646,
                0.0046503916,
                -0.0077069546,
                -0.00032816656,
                -0.0094111785,
                -0.006451211,
                -0.0133992,
                0.003725833,
                0.0041570636,
                -0.012460842,
                -0.022465393,
                -0.005471455,
                -0.003912125,
                0.01806339,
                0.010818715,
                0.02319676,
                -0.020091899,
                -0.01919494,
                -0.020009104,
                -0.0024166168,
                0.027736757,
                0.0015213818,
                -0.0062994175,
                -0.03750672,
                -0.022575788,
                -0.017318225,
                0.019084545,
                -0.0014653219,
                -0.013406099,
                -0.007161879,
                -0.0018146187,
                -0.013316403,
                -0.011991663,
                -0.017773604,
                -0.009942454,
                0.01716643,
                0.022189405,
                -0.007700055,
                -0.022617185,
                0.031048609,
                0.011481086,
                -0.012571237,
                0.014806736,
                -0.0046710907,
                0.0070342347,
                0.0028737213,
                0.023790134,
                -0.020381687,
                -0.014930931,
                0.003912125,
                -0.02385913,
                0.028951103,
                -0.002073357,
                0.013992573,
                -0.009445677,
                -0.01850497,
                0.010846314,
                -0.016172875,
                -0.017056035,
                -0.01316461,
                -0.008079538,
                0.0018163436,
                0.009093792,
                -0.005378309,
                0.0033549746,
                -0.034526054,
                -0.00580609,
                0.03391888,
                -0.036982343,
                -0.015924487,
                -0.012157255,
                -0.017566612,
                -0.015137922,
                0.015124123,
                0.23028408,
                0.013475096,
                -0.020216094,
                0.03615438,
                0.0059958315,
                0.00038875444,
                0.02029889,
                -0.0025494357,
                0.008341726,
                0.00058129895,
                0.013737285,
                0.015731296,
                -0.0245767,
                -0.0047814855,
                0.021113053,
                -0.007927745,
                -0.022244602,
                -0.0132267075,
                -0.017138831,
                -0.006496059,
                -0.0023562445,
                0.011018806,
                0.0019784863,
                -0.017497616,
                0.015689896,
                0.0057888404,
                -0.010577226,
                -0.01894655,
                0.0030168898,
                -0.0077759516,
                -0.011322392,
                -0.020478282,
                -0.011839869,
                -0.012861024,
                0.019346733,
                -0.0028512971,
                0.0008900601,
                0.011957164,
                0.0057715913,
                0.005419707,
                0.02120965,
                -0.012522939,
                0.014213363,
                -0.014102968,
                -0.026674205,
                -0.00083831244,
                -0.026908794,
                -0.013806282,
                -0.0076172585,
                0.0006313217,
                -0.031186603,
                -0.006585755,
                0.02743317,
                0.05177528,
                -0.00034131907,
                -0.02053348,
                0.016628254,
                -0.008010541,
                -0.020036701,
                0.006064828,
                -0.032732133,
                0.030055054,
                0.00513337,
                -0.006789296,
                -0.010294339,
                0.017897798,
                -0.020657673,
                -0.010653122,
                -0.0054059075,
                -0.014475551,
                0.010087348,
                -0.007410268,
                0.00847972,
                0.0079898415,
                -0.00913519,
                -0.013461296,
                0.0037775808,
                0.017759804,
                0.003929374,
                0.022824178,
                -0.010694521,
                -0.008528017,
                -0.003322201,
                0.003991471,
                -0.011067104,
                -0.016255671,
                -0.0040121702,
                0.022589589,
                0.0071480796,
                0.029171893,
                -0.00068695046,
                -0.026177427,
                -0.023348553,
                -0.0020595577,
                -0.007748353,
                0.003417072,
                0.010591025,
                0.039797418,
                -0.017511414,
                -0.005385209,
                -0.019843511,
                0.036237177,
                -0.0040915166,
                -0.00006085743,
                0.016614456,
                -0.012343546,
                0.005043674,
                0.023141563,
                -0.0064822594,
                -0.034802042,
                0.0069755875,
                -0.042667687,
                0.009880357,
                -0.0013066289,
                -0.015234517,
                -0.0103219375,
                0.001362689,
                -0.0053886585,
                0.0020181595,
                0.011998562,
                0.0039017752,
                -0.0060993265,
                0.005040224,
                0.012405644,
                -0.003282528,
                -0.017511414,
                -0.0020009102,
                -0.013316403,
                -0.00490223,
                -0.03477444,
                0.00847972,
                -0.025984235,
                0.004198462,
                -0.015910687,
                -0.0267708,
                0.005909585,
                -0.017511414,
                0.012467741,
                -0.0030255143,
                -0.002318296,
                0.007072183,
                0.015662298,
                -0.01763561,
                -0.0032894276,
                0.016973238,
                -0.019995304,
                0.014820536,
                -0.000199552,
                -0.016131477,
                -0.027308976,
                -0.0038327782,
                -0.023928128,
                0.0059923814,
                -0.012005462,
                0.008065739,
                0.030607028,
                -0.020423084,
                -0.01471014,
                0.0043330058,
                0.019953907,
                -0.028509522,
                -0.018035792,
                0.017732205,
                -0.014461752,
                -0.007230876,
                -0.013771783,
                -0.1783984,
                0.01720783,
                0.016117677,
                -0.0075551616,
                0.012688532,
                0.012164155,
                0.035160825,
                0.021278646,
                -0.032235354,
                0.017194029,
                0.014834335,
                0.004960878,
                -0.016683452,
                -0.0099838525,
                -0.0024907885,
                -0.03654076,
                -0.016393665,
                0.0149171315,
                0.0003712896,
                0.037120335,
                0.01428236,
                -0.0028081741,
                0.02253439,
                -0.0023959177,
                -0.0178426,
                0.0020871565,
                -0.0007550849,
                0.03433286,
                -0.00014058119,
                -0.018932752,
                0.015041326,
                -0.018491171,
                0.0075758607,
                -0.009238686,
                0.0053714095,
                -0.0047159386,
                -0.0025822092,
                0.022396397,
                -0.008610814,
                -0.006202822,
                0.0033722238,
                0.027460769,
                0.009349081,
                -0.006937639,
                -0.010694521,
                0.014130566,
                0.014654943,
                -0.009866558,
                0.00022208379,
                -0.027736757,
                0.017194029,
                -0.027322775,
                0.012640233,
                -0.0078035505,
                0.0074240672,
                0.013895977,
                -0.0015394936,
                0.024162717,
                -0.011991663,
                -0.017083634,
                -0.013344002,
                -0.031297,
                0.009176589,
                -0.007210177,
                -0.02609463,
                -0.016904242,
                -0.0019457128,
                0.0057888404,
                -0.010045949,
                0.017897798,
                0.004567595,
                -0.024797488,
                -0.010618624,
                -0.0028478473,
                0.02031269,
                -0.0061752233,
                -0.021016458,
                -0.016048681,
                -0.012433243,
                -0.0026218826,
                -0.0028512971,
                0.05690865,
                0.014102968,
                0.013288804,
                -0.008859203,
                0.022134207,
                -0.018780958,
                -0.009535372,
                -0.00051402696,
                0.010114946,
                -0.013019716,
                -0.0029875662,
                0.013054215,
                -0.009535372,
                -0.002345895,
                0.025597854,
                -0.009507773,
                0.00027318462,
                0.0005804365,
                0.00019523969,
                0.006313217,
                -0.013744184,
                -0.009031695,
                0.03033104,
                0.037865505,
                0.018877555,
                0.010860113,
                0.042584892,
                0.033587694,
                -0.011439688,
                -0.03171098,
                0.013130112,
                -0.0002348051,
                0.049043003,
                0.023486547,
                0.029585874,
                0.0016291895,
                -0.010135646,
                -0.004605544,
                -0.024452504,
                0.038279485,
                -0.030469034,
                -0.037782706,
                0.016310869,
                0.017276825,
                0.0036671855,
                -0.097644426,
                -0.027929949,
                0.010466831,
                0.01405467,
                -0.009528473,
                0.02766776,
                -0.003322201,
                0.042805683,
                0.0059647826,
                0.023831531,
                0.008100237,
                -0.0032187058,
                -0.0028530222,
                0.02098886,
                0.009424978,
                0.0067030494,
                -0.0049263793,
                -0.020906063,
                -0.009783762,
                0.018408375,
                -0.017759804,
                -0.009286984,
                -0.011901966,
                -0.027998945,
                -0.016683452,
                -0.024907883,
                -0.03322891,
                0.004415802,
                0.022879375,
                0.02634302,
                0.023293355,
                -0.023583144,
                -0.030496633,
                -0.025942838,
                -0.0020647324,
                -0.021030258,
                -0.02988946,
                0.0074171675,
                0.0071204808,
                -0.03888666,
                0.013302604,
                -0.014530749,
                0.013199109,
                -0.023997124,
                -0.000064576794,
                -0.013537194,
                -0.0267708,
                0.05310002,
                0.024190316,
                -0.0027892,
                -0.017028436,
                -0.0109636085,
                0.014530749,
                -0.013040416,
                0.02276898,
                -0.02407992,
                0.019263936,
                -0.000110610665,
                -0.028978702,
                0.0039466233,
                0.021458039,
                0.030165449,
                -0.01272993,
                0.01426856,
                0.023790134,
                0.005778491,
                -0.018560167,
                -0.0020492082,
                0.018822357,
                0.009631968,
                -0.014309959,
                0.02475609,
                -0.04065298,
                -0.0021044058,
                -0.0033377255,
                -0.00624077,
                -0.035878394,
                -0.018325578,
                0.021720227,
                -0.008735009,
                0.013744184,
                -0.008672912,
                -0.010121847,
                -0.013709686,
                0.008148535,
                0.026743202,
                -0.028040344,
                0.0041570636,
                -0.013716585,
                -0.009017896,
                0.004336456,
                0.02563925,
                0.047028292,
                -0.013709686,
                -0.023748735,
                0.0037223832,
                -0.03609918,
                0.0052058166,
                0.011439688,
                -0.0049263793,
                -0.018849956,
                -0.0011824345,
                -0.067506574,
                0.028454324,
                0.024562899,
                -0.01629707,
                0.004643492,
                0.0013083539,
                0.050671328,
                -0.022368798,
                0.020823266,
                0.0056577465,
                -0.048987806,
                0.017442418,
                -0.00714118,
                0.0013437148,
                -0.030386237,
                -0.02743317,
                0.030303443,
                0.013012817,
                0.022906974,
                0.003260104,
                0.00826583,
                -0.005661196,
                0.004063918,
                0.0044951485,
                -0.011487985,
                0.014109868,
                -0.01763561,
                0.019374331,
                -0.019553723,
                -0.012529839,
                0.018159986,
                -0.027833352,
                -0.0038741764,
                0.016918043,
                -0.0047849356,
                -0.023362353,
                -0.013109412,
                0.015938286,
                0.00150672,
                -0.024880284,
                -0.012012362,
                -0.0068203444,
                -0.018008193,
                -0.000070775735,
                -0.007624158,
                0.024852686,
                0.0017352722,
                -0.0072446754,
                0.013419898,
                0.01603488,
                0.025915239,
                0.0026201576,
                -0.0024580148,
                -0.028247334,
                -0.029723868,
                -0.041398145,
                0.015068925,
                0.0057439925,
                0.037175532,
                -0.003499868,
                0.015814092,
                0.0057025943,
                0.027557366,
                -0.0050126254,
                0.0135992905,
                -0.013219807,
                0.008983398,
                0.0008702235,
                0.005557701,
                -0.03518842,
                -0.021609832,
                0.0034912436,
                -0.0037120336,
                -0.016559258,
                0.00869361,
                -0.002451115,
                0.0028219735,
                -0.03369809,
                0.00023847056,
                0.022023814,
                0.009355981,
                -0.011336192,
                -0.023776334,
                0.005019525,
                0.02275518,
                0.0025822092,
                0.0038327782,
                0.01741482,
                -0.023734936,
                0.0267708,
                -0.03731353,
                -0.007969143,
                -0.02275518,
                -0.020933662,
                -0.011536283,
                0.0014679092,
                0.025032079,
                0.006440861,
                -0.0030220645,
                0.003839678,
                0.007568961,
                0.016628254,
                0.0020371338,
                -0.014337557,
                -0.011260295,
                0.024907883,
                -0.006306317,
                -0.010087348,
                0.011763973,
                0.018477373,
                0.0037672312,
                -0.020850865,
                0.03171098,
                0.010473731,
                0.005733643,
                0.0032514792,
                -0.013992573,
                -0.040238995,
                -0.024880284,
                0.030165449,
                0.0015990033,
                0.009086893,
                -0.009611269,
                0.0066168034,
                0.006713399,
                0.006333916,
                0.016890444,
                -0.02054728,
                0.011688076,
                0.020561079,
                -0.01941573,
                -0.027819553,
                -0.009521573,
                -0.011087803,
                -0.019222539,
                -0.011653578,
                -0.010680721,
                0.02476989,
                -0.021361442,
                0.072915934,
                -0.0026857047,
                -0.0074654655,
                0.028702714,
                -0.020188496,
                0.024700893,
                0.022203205,
                -0.012012362,
                -0.0056163482,
                -0.021223448,
                0.029585874,
                -0.017263027,
                -0.0003048801,
                -0.01829798,
                -0.011853669,
                -0.008403824,
                0.02166503,
                0.0093076825,
                -0.0290063,
                -0.0026736301,
                0.003912125,
                -0.0043399055,
                -0.0043813037,
                0.007548262,
                0.0018128938,
                -0.0048125344,
                0.019512326,
                0.00018726192,
                -0.006961788,
                -0.04374404,
                0.013861479,
                0.0057060444,
                -0.025597854,
                -0.016586857,
                -0.020229893,
                -0.006047579,
                -0.004733188,
                0.017401021,
                0.013764883,
                -0.011094702,
                0.0054335063,
                0.025777245,
                -0.00915589,
                0.014144366,
                -0.017111233,
                -0.009521573,
                0.004557246,
                -0.012702331,
                -0.029116696 };
            // Convert the double array into a float array:
            var expectedVectors = new float[vectors.Length];
            for (var i = 0; i < vectors.Length; i++)
            {
                expectedVectors[i] = (float)vectors[i];
            }
        
            var input = "Can you show me sales orders and quantities of size L racing socks?";
            var expectedResponse = (expectedVectors, expectedTokens);
            _openAiServiceMock.Setup(s => s.GetEmbeddingsAsync(input))
                .ReturnsAsync(expectedResponse);

            // Act
            var service = _openAiServiceMock.Object;
            var (response, responseTokens) = await service.GetEmbeddingsAsync(input);

            // Assert
            Assert.AreEqual(expectedResponse.expectedVectors, response);
            Assert.AreEqual(expectedResponse.expectedTokens, responseTokens);
        }

    }
}
